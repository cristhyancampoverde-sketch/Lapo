<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>Para Ti ‚ú®</title>
  <style>
    html,body{margin:0;height:100%;background:#000;overflow:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    canvas{position:fixed;inset:0;width:100%;height:100%}
    .ui{
      position:fixed;left:12px;right:12px;top:12px;
      display:flex;justify-content:space-between;gap:10px;pointer-events:none
    }
    .pill{
      pointer-events:auto;
      background:rgba(0,0,0,.45);border:1px solid rgba(255,255,255,.12);
      backdrop-filter:blur(10px);color:#fff;padding:10px 12px;border-radius:999px;
      display:flex;align-items:center;gap:10px;box-shadow:0 10px 30px rgba(0,0,0,.35);
      font-size:13px
    }
    button{appearance:none;border:0;cursor:pointer;background:rgba(255,255,255,.10);color:#fff;padding:10px 12px;border-radius:12px}
    button:active{transform:scale(.98)}
    .centerText{
      position:fixed;inset:0;display:grid;place-items:center;text-align:center;pointer-events:none;padding:24px
    }
    .centerText h1{
      margin:0;
      font-size:clamp(28px,4vw,56px);
      text-shadow:0 0 26px rgba(255,255,255,.14);
    }
    .centerText p{
      margin:10px 0 0;
      font-size:clamp(15px,2vw,22px);
      opacity:.9
    }
    .hint{
      position:fixed;left:50%;bottom:12px;transform:translateX(-50%);
      color:rgba(255,255,255,.72);font-size:12px;padding:8px 10px;
      background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.10);border-radius:999px;
      backdrop-filter:blur(10px);pointer-events:none;max-width:min(560px, calc(100% - 24px));text-align:center
    }
  </style>
</head>
<body>
  <canvas id="c"></canvas>

  <div class="ui">
    <div class="pill"><strong id="t1">Te amo</strong> <span style="opacity:.75" id="t2">‚Äî solo quer√≠a record√°rtelo</span></div>
    <div class="pill">
      <button id="btnPause">Pausar</button>
      <button id="btnMore">M√°s frases</button>
    </div>
  </div>

  <div class="centerText">
    <div>
      <h1 id="main">Te amo mi amor üíñ</h1>
      <p id="sub">Mira el cielo‚Ä¶ est√° lleno de ‚Äúnosotros‚Äù.</p>
    </div>
  </div>

  <div class="hint">Toca la pantalla para ‚Äúexplosi√≥n‚Äù ‚ú® ‚Ä¢ Arrastra para mover el viento</div>

<script>
(() => {
  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");

  const CFG = {
    main: "#ff4d8d",
    accent: "#ffffff",
    starCount: 900,
    cometCount: 18,
    floatCount: 24,
    trailLen: 18,
    windStrength: 0.8,
    phrasesA: ["te amo mi amor","mi cielo","mi vida","eres mi todo","me encantas","mi ni√±a hermosa","contigo siempre","te elijo hoy"],
    phrasesB: ["gracias por existir","eres mi paz","mi lugar favorito","qu√©date","mi corazoncito","mi suerte","te pienso","mi universo"],
  };

  let W=0,H=0,DPR=1;
  function resize(){
    DPR = Math.max(1, Math.min(2, devicePixelRatio || 1));
    W = innerWidth; H = innerHeight;
    canvas.width = Math.floor(W*DPR);
    canvas.height = Math.floor(H*DPR);
    ctx.setTransform(DPR,0,0,DPR,0,0);
  }
  addEventListener("resize", resize); resize();

  // Helpers
  const rand = (a,b)=> a + Math.random()*(b-a);
  const clamp=(v,a,b)=>Math.max(a,Math.min(b,v));
  function rgba(hex,a){
    const h=hex.replace("#","");
    const r=parseInt(h.slice(0,2),16), g=parseInt(h.slice(2,4),16), b=parseInt(h.slice(4,6),16);
    return `rgba(${r},${g},${b},${a})`;
  }

  // Stars
  const stars = Array.from({length: CFG.starCount}, ()=>({
    x: Math.random()*W,
    y: Math.random()*H,
    r: rand(0.2,1.6),
    a: rand(0.25,0.95),
    tw: rand(0,10),
    sp: rand(0.15,0.6),
  }));

  // Comets (particles with trails)
  const comets = Array.from({length: CFG.cometCount}, ()=>newComet());

  function newComet(x=W+rand(0,400), y=rand(-200,H+200)){
    const speed = rand(1.6, 3.8);
    return {
      x, y,
      vx: -speed*rand(0.7,1.1),
      vy: speed*rand(-0.25,0.25),
      life: rand(120, 260),
      max: 0,
      trail: []
    };
  }

  // Floating phrases
  const floaters = [];
  function makeFloater(text){
    return {
      text,
      x: rand(0,W),
      y: rand(0,H),
      z: rand(0.4, 1.25),     // scale
      vy: -rand(0.18,0.55),
      drift: rand(0.08,0.25),
      a: rand(0.25,0.85)
    };
  }
  function refillFloaters(){
    floaters.length = 0;
    for(let i=0;i<CFG.floatCount;i++){
      const list = (i%2===0)?CFG.phrasesA:CFG.phrasesB;
      floaters.push(makeFloater(list[i % list.length]));
    }
  }
  refillFloaters();

  // Interaction: wind + sparkle bursts
  let windX = 0, windY = 0;
  let dragging=false, lastX=0,lastY=0;
  canvas.addEventListener("pointerdown",(e)=>{dragging=true; lastX=e.clientX; lastY=e.clientY; canvas.setPointerCapture(e.pointerId);});
  canvas.addEventListener("pointermove",(e)=>{
    if(!dragging) return;
    const dx=e.clientX-lastX, dy=e.clientY-lastY;
    lastX=e.clientX; lastY=e.clientY;
    windX = clamp(windX + dx*0.02, -12, 12);
    windY = clamp(windY + dy*0.02, -6, 6);
  });
  canvas.addEventListener("pointerup",()=>dragging=false);
  canvas.addEventListener("pointercancel",()=>dragging=false);

  const sparks = [];
  function burst(x,y){
    for(let i=0;i<30;i++){
      const a = rand(0,Math.PI*2);
      const s = rand(1.2, 4.6);
      sparks.push({
        x,y,
        vx: Math.cos(a)*s,
        vy: Math.sin(a)*s,
        life: rand(22, 45),
        c: Math.random()<0.6?CFG.main:"#ffffff"
      });
    }
  }
  canvas.addEventListener("click",(e)=>burst(e.clientX,e.clientY));

  // Buttons
  let paused=false;
  document.getElementById("btnPause").onclick=()=>{
    paused=!paused;
    document.getElementById("btnPause").textContent=paused?"Reanudar":"Pausar";
  };
  let toggle=false;
  document.getElementById("btnMore").onclick=()=>{
    toggle=!toggle;
    const main=document.getElementById("main");
    const sub=document.getElementById("sub");
    if(toggle){
      main.textContent="Eres mi lugar favorito ‚ú®";
      sub.textContent="Y mi raz√≥n para sonre√≠r.";
      // recargar con otras frases
      CFG.phrasesA = ["mi amor","te extra√±o bonito","me haces feliz","qu√© lindo es quererte","mi cielo","me encantas","mi vida","eres t√∫"];
      CFG.phrasesB = ["siempre contigo","te pienso mucho","mi paz","mi alegr√≠a","mi universo","mi suerte","mi corazoncito","mi todo"];
      refillFloaters();
    } else {
      main.textContent="Te amo mi amor üíñ";
      sub.textContent="Mira el cielo‚Ä¶ est√° lleno de ‚Äúnosotros‚Äù.";
      CFG.phrasesA = ["te amo mi amor","mi cielo","mi vida","eres mi todo","me encantas","mi ni√±a hermosa","contigo siempre","te elijo hoy"];
      CFG.phrasesB = ["gracias por existir","eres mi paz","mi lugar favorito","qu√©date","mi corazoncito","mi suerte","te pienso","mi universo"];
      refillFloaters();
    }
  };

  // Heart in center (pulse)
  function drawHeart(cx,cy,s){
    ctx.beginPath();
    ctx.moveTo(cx, cy + s*0.30);
    ctx.bezierCurveTo(cx - s*0.60, cy - s*0.25, cx - s*0.95, cy + s*0.40, cx, cy + s);
    ctx.bezierCurveTo(cx + s*0.95, cy + s*0.40, cx + s*0.60, cy - s*0.25, cx, cy + s*0.30);
    ctx.closePath();
    ctx.fill();
  }

  // Loop
  let t=0;
  function frame(){
    requestAnimationFrame(frame);
    if(!paused) t += 1/60;

    // Background
    ctx.fillStyle="#000";
    ctx.fillRect(0,0,W,H);

    // Soft nebula
    const g = ctx.createRadialGradient(W*0.55, H*0.55, 20, W*0.55, H*0.55, Math.max(W,H)*0.7);
    g.addColorStop(0, rgba(CFG.main, 0.10));
    g.addColorStop(1, "rgba(0,0,0,0)");
    ctx.fillStyle=g;
    ctx.fillRect(0,0,W,H);

    // Stars
    for(const s of stars){
      const tw = 0.5 + 0.5*Math.sin(t*s.sp + s.tw);
      ctx.globalAlpha = s.a*(0.65+0.35*tw);
      ctx.fillStyle="#fff";
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.r*(0.7+0.6*tw), 0, Math.PI*2);
      ctx.fill();
    }
    ctx.globalAlpha=1;

    // Comets
    ctx.lineCap="round";
    for(let i=0;i<comets.length;i++){
      const c = comets[i];
      if(!paused){
        c.max++;
        c.life--;
        // wind
        c.vx += windX*0.002*CFG.windStrength;
        c.vy += windY*0.002*CFG.windStrength;

        c.x += c.vx;
        c.y += c.vy;
        c.trail.push({x:c.x, y:c.y});
        if(c.trail.length>CFG.trailLen) c.trail.shift();
      }

      // draw trail
      for(let k=1;k<c.trail.length;k++){
        const p0=c.trail[k-1], p1=c.trail[k];
        const a = k/c.trail.length;
        ctx.strokeStyle = rgba(CFG.main, 0.20*a);
        ctx.lineWidth = 2.2*a;
        ctx.beginPath();
        ctx.moveTo(p0.x,p0.y);
        ctx.lineTo(p1.x,p1.y);
        ctx.stroke();
      }
      // head
      ctx.fillStyle = rgba("#ffffff", 0.9);
      ctx.beginPath();
      ctx.arc(c.x, c.y, 1.8, 0, Math.PI*2);
      ctx.fill();

      if(c.life<=0 || c.x<-500 || c.y<-500 || c.y>H+500){
        comets[i]=newComet();
      }
    }

    // Center heart + glow
    const beat = 1 + 0.06*Math.sin(t*2.1) + 0.03*Math.sin(t*4.2);
    const s = Math.min(W,H)*0.08*beat;
    // glow
    const gg = ctx.createRadialGradient(W/2,H/2, 0, W/2,H/2, s*5);
    gg.addColorStop(0, rgba(CFG.main, 0.25));
    gg.addColorStop(1, "rgba(0,0,0,0)");
    ctx.fillStyle=gg;
    ctx.fillRect(0,0,W,H);

    ctx.fillStyle = CFG.main;
    ctx.shadowColor = rgba(CFG.main, 0.55);
    ctx.shadowBlur = 24;
    drawHeart(W/2, H/2 - s*0.15, s);
    ctx.shadowBlur = 0;

    // Floating phrases (depth-ish)
    for(const f of floaters){
      if(!paused){
        f.y += f.vy;
        f.x += (Math.sin(t*f.drift) + windX*0.02) * 0.25;
        if(f.y < -60) { f.y = H + 60; f.x = rand(0,W); }
        if(f.x < -120) f.x = W+120;
        if(f.x > W+120) f.x = -120;
      }
      const scale = f.z;
      ctx.font = `${Math.round(14*scale)}px system-ui,-apple-system,Segoe UI,Roboto,Arial`;
      ctx.textAlign="center";
      ctx.textBaseline="middle";
      ctx.globalAlpha = f.a;

      // outline + fill
      ctx.lineWidth = 3;
      ctx.strokeStyle = rgba(CFG.main, 0.55);
      ctx.fillStyle = "rgba(255,255,255,0.95)";
      ctx.shadowColor = "rgba(255,255,255,0.28)";
      ctx.shadowBlur = 10;
      ctx.strokeText(f.text, f.x, f.y);
      ctx.shadowBlur = 0;
      ctx.fillText(f.text, f.x, f.y);

      ctx.globalAlpha=1;
    }

    // Sparks
    for(let i=sparks.length-1;i>=0;i--){
      const p = sparks[i];
      if(!paused){
        p.life -= 1;
        p.vx *= 0.97;
        p.vy *= 0.97;
        p.vy += 0.06; // gravity
        p.x += p.vx;
        p.y += p.vy;
      }
      const a = clamp(p.life/45, 0, 1);
      ctx.globalAlpha = a;
      ctx.fillStyle = rgba(p.c, 0.85*a);
      ctx.beginPath();
      ctx.arc(p.x, p.y, 2.0*a, 0, Math.PI*2);
      ctx.fill();
      if(p.life<=0) sparks.splice(i,1);
    }
    ctx.globalAlpha=1;

    // Slowly relax wind
    windX *= 0.985;
    windY *= 0.985;
  }
  frame();
})();
</script>
</body>
</html>
