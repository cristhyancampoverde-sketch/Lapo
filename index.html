<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>Animaci√≥n Bonita ‚ú®</title>
  <style>
    html,body{margin:0;height:100%;background:#000;overflow:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    canvas{position:fixed;inset:0;width:100%;height:100%}
    .top{
      position:fixed;left:12px;right:12px;top:12px;display:flex;justify-content:space-between;gap:10px;pointer-events:none
    }
    .pill{
      pointer-events:auto;background:rgba(0,0,0,.45);border:1px solid rgba(255,255,255,.12);
      backdrop-filter:blur(10px);color:#fff;padding:10px 12px;border-radius:999px;
      display:flex;align-items:center;gap:10px;box-shadow:0 10px 30px rgba(0,0,0,.35);
      font-size:13px
    }
    button{appearance:none;border:0;cursor:pointer;background:rgba(255,255,255,.10);color:#fff;padding:10px 12px;border-radius:12px}
    button:active{transform:scale(.98)}
    .hint{
      position:fixed;left:50%;bottom:12px;transform:translateX(-50%);
      color:rgba(255,255,255,.72);font-size:12px;padding:8px 10px;
      background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.10);border-radius:999px;
      backdrop-filter:blur(10px);pointer-events:none;max-width:min(560px, calc(100% - 24px));text-align:center
    }
  </style>
</head>
<body>
  <canvas id="c"></canvas>

  <div class="top">
    <div class="pill"><strong id="label">Te amo üíñ</strong> <span style="opacity:.75">‚Äî toca para magia</span></div>
    <div class="pill">
      <button id="btn">Cambiar frase</button>
      <button id="pause">Pausar</button>
    </div>
  </div>

  <div class="hint">Toca para ondas ‚ú® ‚Ä¢ Arrastra para ‚Äúviento‚Äù ‚Ä¢ Rueda/Pellizca para zoom</div>

<script>
(() => {
  const c = document.getElementById("c");
  const x = c.getContext("2d");

  const CFG = {
    main:"#ff4d8d",
    glow:"#ffffff",
    stars: 1200,
    dust: 260,
    zoomMin: 0.6,
    zoomMax: 2.0,
  };

  const phrases = [
    "te amo mi amor", "mi cielo", "mi vida", "eres mi todo",
    "contigo siempre", "mi corazoncito", "me haces feliz", "te elijo hoy"
  ];

  let W=0,H=0,DPR=1, t=0, paused=false;
  let zoom=1.0, windX=0, windY=0;

  function resize(){
    DPR = Math.max(1, Math.min(2, devicePixelRatio||1));
    W = innerWidth; H = innerHeight;
    c.width = Math.floor(W*DPR);
    c.height = Math.floor(H*DPR);
    x.setTransform(DPR,0,0,DPR,0,0);
  }
  addEventListener("resize", resize); resize();

  const rand = (a,b)=> a + Math.random()*(b-a);
  const clamp = (v,a,b)=> Math.max(a, Math.min(b,v));
  function rgba(hex,a){
    const h=hex.replace("#","");
    const r=parseInt(h.slice(0,2),16), g=parseInt(h.slice(2,4),16), b=parseInt(h.slice(4,6),16);
    return `rgba(${r},${g},${b},${a})`;
  }

  // Stars
  const stars = Array.from({length: CFG.stars}, ()=>({
    x: Math.random()*W, y: Math.random()*H,
    r: rand(0.25,1.8),
    a: rand(0.2,0.95),
    tw: rand(0,10),
    sp: rand(0.2,0.8)
  }));

  // Dust particles (parallax)
  const dust = Array.from({length: CFG.dust}, ()=>({
    x: rand(-W*0.2, W*1.2),
    y: rand(-H*0.2, H*1.2),
    vx: rand(-0.25,0.25),
    vy: rand(-0.25,0.25),
    s: rand(0.6, 2.2),
    a: rand(0.08, 0.22),
    z: rand(0.4, 1.4)
  }));

  // Ripples + sparkles on tap
  const ripples = [];
  const spark = [];
  function burst(px,py){
    ripples.push({x:px,y:py,r:0,life:1});
    for(let i=0;i<26;i++){
      const a = rand(0,Math.PI*2);
      const spd = rand(1.6, 4.8);
      spark.push({x:px,y:py,vx:Math.cos(a)*spd,vy:Math.sin(a)*spd,life:rand(18,40)});
    }
  }

  // Interaction: pointer drag => wind
  let dragging=false, lastX=0,lastY=0;
  c.addEventListener("pointerdown",(e)=>{dragging=true; lastX=e.clientX; lastY=e.clientY; c.setPointerCapture(e.pointerId);});
  c.addEventListener("pointermove",(e)=>{
    if(!dragging) return;
    const dx=e.clientX-lastX, dy=e.clientY-lastY;
    lastX=e.clientX; lastY=e.clientY;
    windX = clamp(windX + dx*0.03, -18, 18);
    windY = clamp(windY + dy*0.03, -10, 10);
  });
  c.addEventListener("pointerup",()=>dragging=false);
  c.addEventListener("pointercancel",()=>dragging=false);

  c.addEventListener("click",(e)=>burst(e.clientX,e.clientY));

  addEventListener("wheel",(e)=>{
    const z = Math.exp(-e.deltaY*0.0012);
    zoom = clamp(zoom*z, CFG.zoomMin, CFG.zoomMax);
  }, {passive:true});

  let pinch0=null;
  c.addEventListener("touchstart",(e)=>{
    if(e.touches.length===2){
      pinch0 = Math.hypot(
        e.touches[0].clientX - e.touches[1].clientX,
        e.touches[0].clientY - e.touches[1].clientY
      );
    }
  }, {passive:true});
  c.addEventListener("touchmove",(e)=>{
    if(e.touches.length===2 && pinch0){
      const d = Math.hypot(
        e.touches[0].clientX - e.touches[1].clientX,
        e.touches[0].clientY - e.touches[1].clientY
      );
      const z = d / pinch0;
      pinch0 = d;
      zoom = clamp(zoom*z, CFG.zoomMin, CFG.zoomMax);
    }
  }, {passive:true});
  c.addEventListener("touchend",()=>pinch0=null, {passive:true});

  // Phrase overlay (animated)
  let phraseIndex = 0;
  let phraseAlpha = 1;
  let phraseTimer = 0;

  const label = document.getElementById("label");
  document.getElementById("btn").onclick = () => {
    phraseIndex = (phraseIndex + 1) % phrases.length;
    label.textContent = phrases[phraseIndex];
    phraseAlpha = 1;
    phraseTimer = 0;
  };

  document.getElementById("pause").onclick = () => {
    paused = !paused;
    document.getElementById("pause").textContent = paused ? "Reanudar" : "Pausar";
  };

  // Heart (with fake 3D shading)
  function heartPath(cx,cy,s){
    x.beginPath();
    x.moveTo(cx, cy + s*0.28);
    x.bezierCurveTo(cx - s*0.62, cy - s*0.28, cx - s*0.98, cy + s*0.42, cx, cy + s);
    x.bezierCurveTo(cx + s*0.98, cy + s*0.42, cx + s*0.62, cy - s*0.28, cx, cy + s*0.28);
    x.closePath();
  }

  function frame(){
    requestAnimationFrame(frame);
    if(!paused) t += 1/60;

    // Background fill
    x.fillStyle="#000";
    x.fillRect(0,0,W,H);

    // Aurora gradient (animated)
    const ax = W*(0.45 + 0.08*Math.sin(t*0.20));
    const ay = H*(0.55 + 0.08*Math.cos(t*0.18));
    const g = x.createRadialGradient(ax,ay, 10, ax,ay, Math.max(W,H)*0.75);
    g.addColorStop(0, rgba(CFG.main, 0.14));
    g.addColorStop(0.55, rgba(CFG.main, 0.06));
    g.addColorStop(1, "rgba(0,0,0,0)");
    x.fillStyle=g; x.fillRect(0,0,W,H);

    // Stars twinkle
    for(const s of stars){
      const tw = 0.5 + 0.5*Math.sin(t*s.sp + s.tw);
      x.globalAlpha = s.a*(0.55+0.45*tw);
      x.fillStyle="#fff";
      x.beginPath();
      x.arc(s.x, s.y, s.r*(0.7+0.7*tw), 0, Math.PI*2);
      x.fill();
    }
    x.globalAlpha=1;

    // Dust drift (parallax with zoom & wind)
    for(const p of dust){
      if(!paused){
        p.vx += windX*0.0004*p.z;
        p.vy += windY*0.0004*p.z;
        p.x += p.vx;
        p.y += p.vy;

        // wrap
        if(p.x<-W*0.25) p.x=W*1.25;
        if(p.x>W*1.25) p.x=-W*0.25;
        if(p.y<-H*0.25) p.y=H*1.25;
        if(p.y>H*1.25) p.y=-H*0.25;
      }
      const sz = p.s*(0.6+0.8*p.z)*zoom;
      x.globalAlpha = p.a;
      x.fillStyle = rgba(CFG.main, 0.9);
      x.beginPath();
      x.arc(p.x, p.y, sz, 0, Math.PI*2);
      x.fill();
    }
    x.globalAlpha=1;

    // Center heart pulse + rotate illusion
    const beat = 1 + 0.07*Math.sin(t*2.2) + 0.03*Math.sin(t*4.4);
    const base = Math.min(W,H)*0.085*zoom;
    const s = base*beat;
    const rot = Math.sin(t*0.9)*0.35 + windX*0.01; // fake rotate via gradient shift

    // glow
    const gg = x.createRadialGradient(W/2,H/2, 0, W/2,H/2, s*5.2);
    gg.addColorStop(0, rgba(CFG.main, 0.22));
    gg.addColorStop(1, "rgba(0,0,0,0)");
    x.fillStyle=gg; x.fillRect(0,0,W,H);

    // shading gradient for fake 3D
    const hx = W/2 + rot*s*1.2, hy = H/2 - rot*s*0.6;
    const hg = x.createRadialGradient(hx,hy, s*0.2, W/2,H/2, s*2.0);
    hg.addColorStop(0, rgba("#ffffff", 0.35));
    hg.addColorStop(0.3, rgba(CFG.main, 0.95));
    hg.addColorStop(1, rgba("#5a0022", 0.95));

    x.shadowColor = rgba(CFG.main, 0.55);
    x.shadowBlur = 26;
    x.fillStyle = hg;
    heartPath(W/2, H/2 - s*0.12, s);
    x.fill();
    x.shadowBlur = 0;

    // Ripples
    for(let i=ripples.length-1;i>=0;i--){
      const r = ripples[i];
      if(!paused){
        r.r += 6.5;
        r.life -= 0.02;
      }
      const a = clamp(r.life, 0, 1);
      x.globalAlpha = a;
      x.strokeStyle = rgba(CFG.main, 0.55*a);
      x.lineWidth = 2;
      x.beginPath();
      x.arc(r.x, r.y, r.r, 0, Math.PI*2);
      x.stroke();
      if(r.life<=0) ripples.splice(i,1);
    }
    x.globalAlpha = 1;

    // Sparkles
    for(let i=spark.length-1;i>=0;i--){
      const p = spark[i];
      if(!paused){
        p.life -= 1;
        p.vx *= 0.97; p.vy *= 0.97;
        p.vy += 0.05;
        p.x += p.vx; p.y += p.vy;
      }
      const a = clamp(p.life/40, 0, 1);
      x.globalAlpha = a;
      x.fillStyle = rgba(Math.random()<0.5?CFG.main:"#ffffff", 0.85*a);
      x.beginPath();
      x.arc(p.x, p.y, 2.0*a, 0, Math.PI*2);
      x.fill();
      if(p.life<=0) spark.splice(i,1);
    }
    x.globalAlpha = 1;

    // Phrase fade in/out auto
    phraseTimer += 1/60;
    phraseAlpha = 0.35 + 0.65*(0.5+0.5*Math.sin(t*0.6));
    x.globalAlpha = phraseAlpha;
    x.font = `${Math.round(18*zoom)}px system-ui,-apple-system,Segoe UI,Roboto,Arial`;
    x.textAlign="center"; x.textBaseline="middle";
    x.lineWidth = 3;
    x.strokeStyle = rgba(CFG.main, 0.55);
    x.fillStyle = "rgba(255,255,255,0.95)";
    x.strokeText(phrases[phraseIndex], W/2, H*0.78);
    x.fillText(phrases[phraseIndex], W/2, H*0.78);
    x.globalAlpha = 1;

    // Relax wind
    windX *= 0.985;
    windY *= 0.985;
  }
  frame();
})();
</script>
</body>
</html>
